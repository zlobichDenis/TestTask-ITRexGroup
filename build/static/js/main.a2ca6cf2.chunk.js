(this["webpackJsonptest-itrex"]=this["webpackJsonptest-itrex"]||[]).push([[0],{14:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(4),c=n.n(i),s=n(5),o=n(6),l=n(2),u=n(8),d=n(7),h=n(0),f=function(e){var t=e.fieldValue;return Object(h.jsx)("td",{children:t})},j=function(e){var t=e.person,n=e.onChangeActivePerson,r=Object.keys(t).map((function(e){var n=10*Math.random();return"adress"===e?Object(h.jsx)(f,{fieldValue:t[e].state},"person".concat(t[e].id+n,"__").concat(e)):"description"!==e?Object(h.jsx)(f,{fieldValue:t[e]},"person".concat(t[e].id+n,"__").concat(e)):void 0}));return Object(h.jsx)("tbody",{children:Object(h.jsx)("tr",{onClick:n,children:r})})},b=function(e){var t=e.data,n=e.onChangeActivePerson,r=e.activeFieldOfSort,a=e.onChangeActiveFieldOfSort,i=r.field,c=r.direction,s=t.map((function(e){var t=10*Math.random();return Object(h.jsx)(j,{onChangeActivePerson:function(){return n(e)},person:e},e.id+t)})),o=Object.keys(t[0]).map((function(e){var t=i===e&&!0===c?{color:"red"}:{color:"blue"};return"adress"===e?Object(h.jsxs)("th",{children:[Object(h.jsx)("button",{style:"state"===i&&c?{color:"red"}:{color:"blue"},onClick:function(){a({field:"state",direction:"state"!==i||!c})},value:"state",children:"To top/down"},"sort-button-".concat(e)),"state"]},"head-row__state"):"description"!==e?Object(h.jsxs)("th",{children:[Object(h.jsx)("button",{style:t,onClick:function(t){var n=t.target.value;a({field:n,direction:i!==e||!c})},value:e,children:"To top/down"},"sort-button-".concat(e)),e]},"head-row__".concat(e)):void 0}));return Object(h.jsxs)("table",{style:{width:"100%",height:"400px"},border:"1",children:[Object(h.jsx)("thead",{children:Object(h.jsx)("tr",{children:o})}),s]})},v=function(e){var t=e.availableStates,n=e.onChangeActiveFilter,r=Array.from(t).map((function(e){return Object(h.jsx)("option",{className:"",value:e,children:e},"state-".concat(e))}));return Object(h.jsxs)("select",{onChange:function(e){var t=e.target.value;n(t)},defaultValue:"to-high",className:"places__sorting-type",id:"places-sorting",children:[Object(h.jsx)("option",{className:"",value:"NONE",children:"NONE"},"state-".concat("None")),r]})},p=function(e){var t=e.onChangeSubstringInSearch;return Object(h.jsx)("input",{onChange:function(e){setTimeout(t(e.target.value),500)},type:"text"})},O=function(e){var t=e.numberOfButtons,n=e.onChangeCurrentIndex,r=e.currentIndexOfData,a="INDEX",i="NEXT",c="PREV",s=new Array(t).fill(null).map((function(e,t){var i=15*Math.random();return Object(h.jsx)("button",{disabled:t===r,onClick:function(e){var t=+e.target.value;n(t,a)},value:t,name:"button-page-".concat(t),children:t+1},i)}));return Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{onClick:function(){n(null,c)},name:"prev-page",disabled:0===r,children:"Prev"}),s,Object(h.jsx)("button",{onClick:function(){n(null,i)},name:"next-page",disabled:r>=t-1||t<=1,children:"Next"})]})},g=function(e){var t=e.person,n=t.firstName,r=t.lastName,a=t.description,i=t.adress;return Object(h.jsxs)("div",{children:[Object(h.jsx)("h3",{children:"Profile info:"}),Object(h.jsxs)("p",{children:["Selected profile: ",Object(h.jsx)("span",{children:"".concat(n," ").concat(r)})]}),Object(h.jsxs)("p",{children:["Description: ",Object(h.jsx)("span",{children:a})]}),Object(h.jsxs)("p",{children:["Adress: ",Object(h.jsx)("span",{children:i.streetAddress})]}),Object(h.jsxs)("p",{children:["City: ",Object(h.jsx)("span",{children:i.city})]}),Object(h.jsxs)("p",{children:["State: ",Object(h.jsx)("span",{children:i.state})]}),Object(h.jsxs)("p",{children:["Index: ",Object(h.jsx)("span",{children:i.zip})]})]})},x=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).props=e,r.state={currentIndexOfData:0,currentActivePerson:null,activeFilter:"NONE",activeFieldOfSort:{},substringInSeatch:""},r.showedPersons=[],r.onChangeActivePerson=r.onChangeActivePerson.bind(Object(l.a)(r)),r.onChangeCurrentIndex=r.onChangeCurrentIndex.bind(Object(l.a)(r)),r.onChangeActiveFilter=r.onChangeActiveFilter.bind(Object(l.a)(r)),r.onChangeActiveFieldOfSort=r.onChangeActiveFieldOfSort.bind(Object(l.a)(r)),r.onChangeSubstringInSearch=r.onChangeSubstringInSearch.bind(Object(l.a)(r)),r}return Object(o.a)(n,[{key:"splitDataByPage",value:function(e){var t=[];if(e.length>=20){var n=0;return e.forEach((function(r,a){(a+1)%20===0&&(t.push(e.slice(n,a+1)),n+=20)})),t}return t.push(e),t}},{key:"getSortedData",value:function(e,t){var n=t.field,r=t.direction;switch(n){case"id":return r?e.slice().sort((function(e,t){return t.id-e.id})):e.slice().sort((function(e,t){return e.id-t.id}));case"firstName":return r?e.slice().sort((function(e,t){return t.firstName.localeCompare(e.firstName)})):e.slice().sort((function(e,t){return e.firstName.localeCompare(t.firstName)}));case"lastName":return r?e.slice().sort((function(e,t){return t.lastName.localeCompare(e.lastName)})):e.slice().sort((function(e,t){return e.lastName.localeCompare(t.lastName)}));case"email":return r?e.slice().sort((function(e,t){return t.email.localeCompare(e.email)})):e.slice().sort((function(e,t){return e.email.localeCompare(t.email)}));case"phone":return r?e.slice().sort((function(e,t){return t.phone[1].localeCompare(e.phone[1])})):e.slice().sort((function(e,t){return e.phone[1].localeCompare(t.phone[1])}));case"state":return r?e.slice().sort((function(e,t){return t.adress.state.localeCompare(e.adress.state)})):e.slice().sort((function(e,t){return e.adress.state.localeCompare(t.adress.state)}));default:return e}}},{key:"prepareDataForRenderingByFilter",value:function(e,t,n){if("NONE"===t){if(n){var r=e.filter((function(e){return e.firstName.includes(n)}));return r.length>0?this.splitDataByPage(r):this.splitDataByPage(e)}return this.splitDataByPage(e)}var a=e.filter((function(e){return e.adress.state===t}));return this.splitDataByPage(a)}},{key:"onChangeActivePerson",value:function(e){this.setState({currentActivePerson:e})}},{key:"onChangeCurrentIndex",value:function(e,t){switch(t){case"NEXT":this.setState((function(e){return{currentIndexOfData:e.currentIndexOfData+1}}));break;case"PREV":this.setState((function(e){return{currentIndexOfData:e.currentIndexOfData-1}}));break;default:this.setState({currentIndexOfData:e})}}},{key:"getTheAvailableStates",value:function(e){var t=new Set;return e.forEach((function(e){t.add(e.adress.state)})),t}},{key:"onChangeActiveFilter",value:function(e){this.setState({activeFilter:e,currentIndexOfData:0,activeFieldOfSort:{}})}},{key:"onChangeActiveFieldOfSort",value:function(e){this.setState({activeFieldOfSort:e,currentIndexOfData:0})}},{key:"onChangeSubstringInSearch",value:function(e){this.setState({substringInSeatch:e,activeFieldOfSort:{},currentIndexOfData:0})}},{key:"render",value:function(){var e=this.props.data,t=this.state,n=t.activeFilter,r=t.activeFieldOfSort,a=t.substringInSeatch,i=this.getSortedData(e,r);this.showedPersons=this.prepareDataForRenderingByFilter(i,n,a);var c=this.getTheAvailableStates(i),s=this.state,o=s.currentIndexOfData,l=s.currentActivePerson;return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(p,{onChangeSubstringInSearch:this.onChangeSubstringInSearch}),Object(h.jsx)(v,{onChangeActiveFilter:this.onChangeActiveFilter,availableStates:c}),Object(h.jsx)(b,{onChangeActiveFieldOfSort:this.onChangeActiveFieldOfSort,activeFieldOfSort:r,onChangeActivePerson:this.onChangeActivePerson,data:this.showedPersons[o]}),Object(h.jsx)(O,{currentIndexOfData:o,onChangeCurrentIndex:this.onChangeCurrentIndex,numberOfButtons:this.showedPersons.length}),l?Object(h.jsx)(g,{person:l}):null]})}}]),n}(a.a.Component);var C=function(){var e=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),t.response}("https://itrex-react-lab-files.s3.eu-central-1.amazonaws.com/react-test-api.json");return JSON.parse(e).sort((function(e,t){return e.id-t.id}))}();c.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(x,{data:C})}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.a2ca6cf2.chunk.js.map